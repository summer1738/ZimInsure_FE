<div class="container d-flex justify-content-center align-items-center min-vh-100">
    <form nz-form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" class="bg-white p-4 rounded shadow"
        style="min-width:400px;">
        <div class="text-center mb-4">
            <h2 style="margin-bottom: 8px; font-weight: 700; color: #1890ff; letter-spacing: 1px;">ZimInsure</h2>
            <div style="font-size:1.1em; color:#888; margin-bottom: 8px;">Change Your Password</div>
            <p class="text-muted">You must change your password before proceeding.</p>
        </div>

        <div nz-form-item nz-row class="mb-3">
            <div nz-form-label nz-col [nzSpan]="24">
                <label for="currentPassword">Current Password</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="24">
                <input nz-input formControlName="currentPassword" id="currentPassword" type="password"
                    placeholder="Enter your current password" />
                <div *ngIf="changePasswordForm.get('currentPassword')?.invalid && changePasswordForm.get('currentPassword')?.touched"
                    class="text-danger small">Current password is required</div>
            </div>
        </div>

        <div nz-form-item nz-row class="mb-3">
            <div nz-form-label nz-col [nzSpan]="24">
                <label for="newPassword">New Password</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="24">
                <input nz-input formControlName="newPassword" id="newPassword" type="password"
                    placeholder="Enter your new password" />
                <div *ngIf="changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched"
                    class="text-danger small">New password must be at least 6 characters</div>
            </div>
        </div>

        <div nz-form-item nz-row class="mb-3">
            <div nz-form-label nz-col [nzSpan]="24">
                <label for="confirmPassword">Confirm New Password</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="24">
                <input nz-input formControlName="confirmPassword" id="confirmPassword" type="password"
                    placeholder="Confirm your new password" />
                <div *ngIf="changePasswordForm.hasError('passwordMismatch') && changePasswordForm.get('confirmPassword')?.touched"
                    class="text-danger small">Passwords do not match</div>
            </div>
        </div>

        <div *ngIf="errorMessage" class="alert alert-danger py-1 mb-3">{{ errorMessage }}</div>

        <button nz-button nzType="primary" class="w-100 mb-2" [disabled]="changePasswordForm.invalid || loading">
            <span *ngIf="!loading">Change Password</span>
            <span *ngIf="loading"><i nz-icon nzType="loading"></i> Changing Password...</span>
        </button>
    </form>
</div>